<html>
<head>
	<title>TRÃˆS TRIST</title>
	<link rel="shortcut icon" href="img/pintade.png">
	
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">

	<link href="css/main.css" rel="stylesheet">
	<script src="js/canvas.js"></script>
</head>
<body onload="setSize(canvasSize)">
	<div id="wrapper">
		<div id="canvas">
			<canvas id="tetris"> </canvas>
		</div>
	</div>
	<button style="background-color: yellow" onclick="game()"> Grid </button>
	<button style="background-color: yellow" onclick="paintCanvas(canvasSize, canvasMatrix)"> Left block </button>
</body>

<script>
	var createdBlock = 0;
	var movingBlock = 0;
	var canvasSize = Math.min(window.innerWidth, window.innerHeight);
	var canvasMatrix = [];
	for(var i=0; i<100; i++) {
		canvasMatrix[i] = [];
		for(var j=0; j<100; j++) {
			canvasMatrix[i][j] = 0;
		}
	}
	
	var blockStack = []
	for(var i=0; i<4; i++) {
		blockStack[i] = [];
	}

function game(){
  initMatrix(canvasMatrix);
  setInterval(playing,100);
}

function playing(){
console.log(createdBlock);
	if(createdBlock ==0){
		createdBlock = 1 + Math.floor(4*Math.random());
		newBlock(createdBlock, canvasMatrix);
	}
	else{ 
		if(moveBlock(createdBlock, canvasMatrix, blockStack)==false){
			createdBlock=0;
		}
	}
	
	paintCanvas(canvasSize, canvasMatrix)
}
	
</script>
</html>